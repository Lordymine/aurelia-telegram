# Story 2.2: ADE Protocol Document

## Status

**Ready for Review**

## Story

**As a** developer,
**I want** Kimi to deeply understand all ADE capabilities,
**so that** it accurately translates my natural language into ADE commands.

## Acceptance Criteria

1. Arquivo `src/kimi/protocol.md` descrevendo completamente o ADE para o Kimi
2. Seções: agentes disponíveis, comandos de cada agente, pipeline stages, estados possíveis, formato de respostas esperado
3. Exemplos de tradução: "cria um PRD" → `@pm *create-prd`, "roda os testes" → `@qa *run-tests`
4. Instruções para Kimi sobre formatação de respostas para Telegram (concisas, markdown)
5. Instruções sobre quando pedir clarificação ao usuário vs. agir diretamente
6. Loader que injeta o protocol no system prompt de cada chamada Kimi
7. Protocol é versionado e extensível (novos agentes/comandos podem ser adicionados)

## Tasks / Subtasks

- [x] Task 1: Create ADE Protocol Document (AC: 1, 2, 3, 4, 5, 7)
- [x] Task 2: Create protocol loader module (AC: 6)
- [x] Task 3: Write unit tests (AC: all)
- [x] Task 4: Validation

## Dev Notes

- Protocol document is a markdown file loaded at runtime
- Architecture defines it at `src/kimi/protocol.md`
- Loader reads file with `fs.readFileSync` or dynamic import

## Change Log

| Date | Version | Description | Author |
|------|---------|-------------|--------|
| 2026-02-05 | 0.1 | Story draft + implementation | River (SM) + Dex (Dev) |

## Dev Agent Record

### Agent Model Used
Claude Opus 4.6 (claude-opus-4-6)

### File List

| File | Status | Description |
|------|--------|-------------|
| `src/kimi/protocol.md` | Created | ADE Protocol Document v1.0 |
| `src/kimi/protocol-loader.ts` | Created | Loader that reads protocol.md at runtime |
| `tests/unit/kimi/protocol-loader.test.ts` | Created | Tests for protocol loader |
